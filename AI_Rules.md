项目：DeepSeek生活教练

1. 输入处理规则：
   - 接收用户自然语言输入
   - 验证输入不能为空
   - 支持中文和英文输入

2. 对话生成规则：
   - AI扮演生活教练角色
   - 回复必须：
     * 提供有建设性的建议
     * 保持积极鼓励的态度
     * 根据用户情绪调整回应风格
     * 保持尊重和文化敏感性
   - 回复内容应包含：
     * 对用户问题的理解
     * 具体可行的建议
     * 适当的鼓励和支持
     * 引导性问题（促进用户思考）

3. API集成规则：
   - 接口地址：https://ark.cn-beijing.volces.com/api/v3/chat/completions
   - 模型：deepseek-r1-250120
   - 超时时间：60秒
   - 模型温度：0.7（保持适当创意性同时确保回答的专业性）
   - 请求头：
     * Content-Type: application/json
     * Authorization: Bearer {API_KEY}

4. 系统消息模板：
   "你是一位专业的生活教练，名为DeepSeek教练。你的目标是通过对话帮助用户成长和进步。请：
    1. 认真倾听用户的问题和困扰
    2. 提供有建设性且实用的建议
    3. 保持积极鼓励的态度
    4. 根据用户的情绪状态调整回应风格
    5. 引导用户进行自我反思"

5. 技术实现规则：
   - 前端：
     * 纯HTML/CSS/JavaScript
     * 三栏响应式设计
     * 加载状态提示
     * 错误处理显示
     * 情绪分析可视化
     * 流式输出显示（逐字显示AI回复）
     * Markdown格式支持（支持AI回复中的Markdown语法渲染）
   
   - 后端：
     * 原生Node.js服务器（不使用Express等第三方框架）
     * 使用Node.js内置的http模块创建服务器
     * 使用内置的url模块处理路由
     * 基础CORS处理：
       - 设置 Access-Control-Allow-Origin
       - 设置 Access-Control-Allow-Methods
       - 设置 Access-Control-Allow-Headers
     * 对话历史存储：
       - 使用本地JSON文件存储对话历史
       - 每个对话包含时间戳和情绪标签
     * 情绪分析功能：
       - 分析用户输入的情绪倾向
       - 生成情绪趋势图表
     * 简单错误处理：
       - 请求验证
       - 超时处理
       - API调用异常处理
     * 使用环境变量管理API密钥

6. 界面设计规范：
   - 整体布局：
     * 三栏布局设计
     * 左侧为对话历史
     * 中间为主对话区域
     * 右侧为情绪分析区域

   - 设计元素：
     * 顶部导航栏：
       - 左侧显示"DeepSeek 生活教练"标题/logo
       - 右侧有"导出数据"和"新对话"按钮
     * 左侧边栏：
       - 顶部标题为"对话历史"
       - 搜索框用于查找历史对话
       - 按日期分组显示历史对话
       - 对话项有删除功能
     * 中间主区域：
       - 对话气泡左右布局（AI左侧灰色，用户右侧蓝色）
       - 消息下方显示时间戳
       - 用户消息显示情绪标签
       - 底部有情绪选择按钮（开心、难过、生气、焦虑、平静）
       - 输入框提示文字为"分享你的想法..."
       - 输入框右侧有发送按钮
     * 右侧边栏：
       - 顶部标题为"对话分析"
       - "开始分析"按钮
       - 情绪趋势图表
       - 情绪分析文本区域
       - AI洞察区域

   - 色彩规范：
     * 主色调：粉白配色方案
     * 强调色：粉色（#ff6b9d）（用户消息气泡）
     * 辅助色：灰色（AI消息气泡）
     * 文字色：黑色和深灰色

   - 交互设计：
     * 圆角设计的对话气泡
     * 情绪选择按钮的即时反馈
     * 分析按钮的状态变化
     * 清晰的输入和发送机制

   - 设计原则：
     * 简洁直观的界面
     * 注重用户体验
     * 情绪分析可视化
     * 响应式设计适配不同屏幕
     * 清晰的信息层次结构

7. 高级功能：
   - 流式输出：
     * 使用fetch API的流式响应功能
     * 实时逐字显示AI回复内容
     * 提供更自然的对话体验
     * 减少用户等待感
   
   - Markdown格式支持：
     * 支持AI回复中的Markdown语法
     * 支持的元素包括：
       - 标题（h1-h6）
       - 粗体和斜体
       - 列表（有序和无序）
       - 代码块和行内代码
       - 引用块
       - 链接
     * 使用第三方库渲染Markdown内容
     * 保持样式与整体UI一致